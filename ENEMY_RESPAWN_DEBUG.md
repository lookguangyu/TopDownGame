# ğŸ› æ•Œäººé‡ç”Ÿé—®é¢˜è°ƒè¯•æŠ¥å‘Š

## ğŸ” **é—®é¢˜åˆ†æ**

### å‘ç°çš„æ ¹æœ¬åŸå› 
EnemySpawnerä½œä¸ºå•ä¾‹æ¨¡å¼ï¼Œåœ¨æ¸¸æˆé‡å¯æ—¶å­˜åœ¨åœºæ™¯ç»‘å®šé—®é¢˜ï¼š

1. **ç¬¬ä¸€æ¬¡æ¸¸æˆ**: EnemySpawneråˆ›å»ºï¼Œç»‘å®šåˆ°Gameåœºæ™¯1
2. **æ¸¸æˆç»“æŸ**: Gameåœºæ™¯1è¢«é”€æ¯ï¼Œä½†EnemySpawnerå®ä¾‹ä¿æŒ
3. **é‡æ–°å¼€å§‹**: åˆ›å»ºGameåœºæ™¯2ï¼Œä½†EnemySpawnerçš„enemiesç»„ä»ç»‘å®šåˆ°å·²é”€æ¯çš„åœºæ™¯1

### æ¸¸æˆé‡å¯æµç¨‹
```
Victory/GameOver/MainMenu â†’ scene.add('Game', Game, false) â†’ scene.start('Game')
```

æ‰€æœ‰é‡å¯éƒ½ä¼šåˆ›å»ºå…¨æ–°çš„Gameåœºæ™¯å®ä¾‹ï¼Œä½†å•ä¾‹Managerä¿æŒä¸å˜ã€‚

---

## âœ… **å®æ–½çš„ä¿®å¤**

### 1. **EnemySpawner.onInitialize()ä¿®æ”¹**
```typescript
protected onInitialize(): void {
    // æ¯æ¬¡åˆå§‹åŒ–éƒ½é‡æ–°åˆ›å»ºæ•Œäººç»„ï¼ˆè§£å†³åœºæ™¯é‡å¯é—®é¢˜ï¼‰
    if (this.enemies) {
        this.enemies.clear(true, true);
    }
    this.enemies = this.getScene().physics.add.group({
        classType: BattleEnemy,
        runChildUpdate: true,
        maxSize: this.maxEnemies
    });
}
```

### 2. **Gameåœºæ™¯å¯åŠ¨æ—¶é‡ç½®**
```typescript
// åˆå§‹åŒ–æ•Œäººç”Ÿæˆå™¨
if (this.player) {
    this.enemySpawner = EnemySpawner.getInstance();
    // é‡ç½®æ•Œäººç”Ÿæˆå™¨ç¡®ä¿æ¸…æ´çŠ¶æ€
    this.enemySpawner.reset();
    this.enemySpawner.initialize(this);
    this.enemySpawner.setPlayer(this.player);
    this.battleEnemies = this.enemySpawner.getEnemies();
}
```

### 3. **æ·»åŠ è°ƒè¯•æ—¥å¿—**
- `[EnemySpawner] Resetting...` - é‡ç½®æ—¶è¾“å‡º
- `[EnemySpawner] Starting enemy spawning...` - å¼€å§‹ç”Ÿæˆæ—¶è¾“å‡º

---

## ğŸ§ª **æµ‹è¯•æ­¥éª¤**

### éªŒè¯ä¿®å¤
1. **ç¬¬ä¸€æ¬¡æ¸¸æˆ**:
   - å¯åŠ¨æ¸¸æˆ
   - ç¡®è®¤æ•Œäººæ­£å¸¸ç”Ÿæˆ
   - è§‚å¯Ÿæ§åˆ¶å°: `[EnemySpawner] Starting enemy spawning...`

2. **æ¸¸æˆç»“æŸé‡å¯**:
   - ç©å®Œä¸€å±€è¿›å…¥Victory/GameOver
   - ç‚¹å‡»é‡æ–°å¼€å§‹
   - è§‚å¯Ÿæ§åˆ¶å°: 
     - `[EnemySpawner] Resetting...`
     - `[EnemySpawner] Starting enemy spawning...`
   - ç¡®è®¤æ•Œäººé‡æ–°ç”Ÿæˆ

3. **å¤šæ¬¡é‡å¯éªŒè¯**:
   - é‡å¤é‡å¯å¤šæ¬¡
   - æ¯æ¬¡éƒ½åº”è¯¥æœ‰æ•Œäººç”Ÿæˆ

---

## ğŸ”§ **ä¿®å¤åŸç†**

### å•ä¾‹æ¨¡å¼çš„åœºæ™¯ç»‘å®šé—®é¢˜
- **é—®é¢˜**: å•ä¾‹åœ¨ä¸åŒåœºæ™¯é—´ä¿æŒçŠ¶æ€ï¼Œä½†åœºæ™¯ç›¸å…³èµ„æºå¤±æ•ˆ
- **è§£å†³**: åœ¨æ¯æ¬¡åœºæ™¯é‡å¯æ—¶é‡ç½®å•ä¾‹çŠ¶æ€ï¼Œé‡æ–°ç»‘å®šæ–°åœºæ™¯

### åŒé‡ä¿æŠ¤æœºåˆ¶
1. **onInitialize()**: ç¡®ä¿enemiesç»„æ€»æ˜¯ç»‘å®šåˆ°å½“å‰åœºæ™¯
2. **Gameå¯åŠ¨æ—¶reset()**: ç¡®ä¿å®Œå…¨æ¸…æ´çš„çŠ¶æ€

---

## ğŸ“Š **ä¿®å¤å‰åå¯¹æ¯”**

| çŠ¶æ€ | ç¬¬ä¸€æ¬¡å¯åŠ¨ | é‡æ–°å¼€å§‹ |
|------|-----------|---------|
| **ä¿®å¤å‰** | âœ… æ•Œäººç”Ÿæˆ | âŒ æ•Œäººä¸ç”Ÿæˆ |
| **ä¿®å¤å** | âœ… æ•Œäººç”Ÿæˆ | âœ… æ•Œäººç”Ÿæˆ |

---

## âš ï¸ **æ³¨æ„äº‹é¡¹**

### è°ƒè¯•æ—¥å¿—
- æ·»åŠ äº†ä¸´æ—¶è°ƒè¯•æ—¥å¿—ï¼Œå¯åœ¨æµ‹è¯•å®Œæˆåç§»é™¤
- æ—¥å¿—å¸®åŠ©ç¡®è®¤é‡ç½®å’Œå¯åŠ¨æµç¨‹æ­£ç¡®æ‰§è¡Œ

### å…¶ä»–å•ä¾‹Manager
- æ­¤ä¿®å¤æ¨¡å¼å¯åº”ç”¨äºå…¶ä»–æœ‰åœºæ™¯ç»‘å®šçš„å•ä¾‹Manager
- ConfigManagerç­‰çº¯é…ç½®ç±»ä¸å—å½±å“

---

## ğŸ¯ **é¢„æœŸç»“æœ**

ä¿®å¤åï¼Œæ¸¸æˆåº”è¯¥èƒ½å¤Ÿï¼š
- âœ… ç¬¬ä¸€æ¬¡å¯åŠ¨æ­£å¸¸ç”Ÿæˆæ•Œäºº
- âœ… é‡æ–°å¼€å§‹åç»§ç»­ç”Ÿæˆæ•Œäºº  
- âœ… å¤šæ¬¡é‡å¯éƒ½ä¿æŒä¸€è‡´è¡Œä¸º
- âœ… æ§åˆ¶å°æ˜¾ç¤ºæ­£ç¡®çš„è°ƒè¯•ä¿¡æ¯

**å¦‚æœä¿®å¤æˆåŠŸï¼Œç”¨æˆ·åº”è¯¥å†ä¹Ÿä¸ä¼šé‡åˆ°"é‡æ–°å¼€å§‹åæ•Œäººä¸å‡ºç°"çš„é—®é¢˜ã€‚**
